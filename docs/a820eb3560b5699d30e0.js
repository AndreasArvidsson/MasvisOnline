!function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var a={tickerLabelformatterTime:function(t,e,r){return r(e/t)},tickerValuePreFormatter:function(t,e){return e/t},tickerValuePostFormatter:function(t,e){return e*t},toDb:function(t,e){return e?a.round(20*o(t),e):20*o(t)},round:function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r},getColor:function(t){return t>=i.length?"#000000":i[t]},getName:function(t){return t>=s.length?"Ch"+t:s[t]},getShortName:function(t){return u>=u.length?"Ch"+t:u[t]},getTitle:function(t){return{label:t,align:"left",size:17,padding:0}},getBorder:function(){return{width:"1px"}}},n=a,o=function(t){return Math.log(t)/Math.LN10},i=["#000000","#0000FF","#FF0000","#800080","#00FF00","#8080FF","#FF8080","#FF00FF","#00FFFF"],s=["Time(S)","Left","Right","Center","LFE","Surr left","Surr right","Surr back left","Surr back right"],u=["S","L","R","C","LFE","SL","SR","SBL","SBR"],f={};function h(t,e){if(!(this instanceof h))return new h(t);var r=Math.floor(Math.log(t)/Math.LN2);if(Math.pow(2,r)===t){this._bufferSize=t,this._bandwidth=h.calculateBandwidth(t,e);for(var a=new Float32Array(t/2),n=new Float32Array(t/2),o=0;o<t/2;o++)a[o]=Math.cos(2*Math.PI*o/t),n[o]=Math.sin(2*Math.PI*o/t);this._cosTable=a,this._sinTable=n,this._real=new Float32Array(t),this._imag=new Float32Array(t);for(var i,s=new Uint32Array(t),u=1,f=t>>1;u<t;){for(i=0;i<u;i++)s[i+u]=s[i]+f;u<<=1,f>>=1}this._reverseTable=s}else console.error("Invalid buffer size, must be a power of 2.")}function l(t,e){if(this._func=t,e){var r=new Float32Array(e);this._data=r;for(var a=0;a<e;++a)r[a]=this._func(e,a);this.process=function(t,e){var a=t.length;if(e)for(var n=0;n<a;++n)e[n]=t[n]*r[n];else for(var o=0;o<a;++o)t[o]*=r[o]}}else this.process=function(e,r){var a=e.length;if(r)for(var n=0;n<a;++n)r[n]=e[n]*t(a,n);else for(var o=0;o<a;++o)e[o]*=t(a,o)}}h.prototype.fft=function(t){if(t.length===this._bufferSize){for(var e=this._bufferSize,r=this._cosTable,a=this._sinTable,n=this._reverseTable,o=this._real,i=this._imag,s=0;s<e;++s)o[s]=t[n[s]],i[s]=0;for(var u=2;u<=e;u*=2)for(var f=u/2,h=e/u,l=0;l<e;l+=u)for(var c=l,p=0;c<l+f;++c,p+=h){var m=o[c+f]*r[p]+i[c+f]*a[p],g=-o[c+f]*a[p]+i[c+f]*r[p];o[c+f]=o[c]-m,i[c+f]=i[c]-g,o[c]+=m,i[c]+=g}}else console.error("Given buffer has size other than expected. Expected: "+this._bufferSize+" found: "+t.length)},h.prototype.getReal=function(){return this._real},h.prototype.getImaginary=function(){return this._imag},h.prototype.getBandFrequency=function(t){return this._bandwidth*t+this._bandwidth/2},h.prototype.calculateSpectrum=function(t){var e=this._bufferSize/2;t||(t=new Float32Array(e));for(var r=1/this._bufferSize,a=this._real,n=this._imag,o=Math.sqrt,i=0;i<e;++i)t[i]=r*o(a[i]*a[i]+n[i]*n[i]);return t},h.prototype.calculateSpectrumDb=function(t){var e=this._bufferSize/2;t||(t=new Float32Array(e));for(var r,a=1/this._bufferSize,n=this._real,o=this._imag,i=Math.sqrt,s=0;s<e;++s)t[s]=20*(r=a*i(n[s]*n[s]+o[s]*o[s]),Math.log(r)/Math.LN10);return t},h.calculatePow2Size=function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))},h.calculateBandwidth=function(t,e){return 2/t*e/2},h.binIndexToFreq=function(t,e){return e*t+e/2},h.freqToBinIndex=function(t,e){return(t-e/2)/e},f.FFT=h,l.prototype.getData=function(){return this._data};var c=2*Math.PI,p={Bartlett:function(t){return new l((function(t,e){return 2/(t-1)*((t-1)/2-Math.abs(e-(t-1)/2))}),t)},BartlettHann:function(t){return new l((function(t,e){return.62-.48*Math.abs(e/(t-1)-.5)-.38*Math.cos(c*e/(t-1))}),t)},Blackman:function(t,e){var r=(1-(e=e||.16))/2,a=e/2;return new l((function(t,e){return r-.5*Math.cos(c*e/(t-1))+a*Math.cos(4*Math.PI*e/(t-1))}),t)},Cosine:function(t){return new l((function(t,e){return Math.cos(Math.PI*e/(t-1)-Math.PI/2)}),t)},Gauss:function(t,e){e=e||.25;return new l((function(t,r){return Math.pow(Math.E,-.5*Math.pow((r-(t-1)/2)/(e*(t-1)/2),2))}),t)},Hamming:function(t){return new l((function(t,e){return.54-.46*Math.cos(c*e/(t-1))}),t)},Hann:function(t){return new l((function(t,e){return.5*(1-Math.cos(c*e/(t-1)))}),t)},Lanczos:function(t){return new l((function(t,e){var r=2*e/(t-1)-1;return Math.sin(Math.PI*r)/(Math.PI*r)}),t)},Rectangular:function(){return new l((function(){return 1}),length)},Triangular:function(t){return new l((function(t,e){return 2/t*(t/2-Math.abs(e-(t-1)/2))}),t)}};f.windowFunctions=p,f.biquad=function(t,e,r,a,n,o){this.b0=t/a,this.b1=e/a,this.b2=r/a,this.a1=n/a,this.a2=o/a,this.z1=0,this.z2=0,this.processBuffer=function(t,e){e||(e=t);for(var r=0;r<t.length;++r){var a=t[r]*this.b0+this.z1;this.z1=t[r]*this.b1-a*this.a1+this.z2,this.z2=t[r]*this.b2-a*this.a2,e[r]=a}},this.processSample=function(t){var e=t*this.b0+this.z1;return this.z1=t*this.b1-e*this.a1+this.z2,this.z2=t*this.b2-e*this.a2,e}},f.allpass=function(t,e){t>e/2.0001&&(t=e/2.0001);var r=Math.tan(Math.PI*t/e),a=(1-r)/(1+r),n=a,o=-a;return new f.biquad(n,-1,0,1,o,0)};var m=f,g={},v={start:function(t){g[t]=performance.now()},stop:function(t){var e=performance.now(),r=g[t];void 0===r&&console.warn('Timer "'.concat(t,'" doesnâ€™t exist')),delete g[t],console.debug("".concat(t,": ").concat(e-r," ms"))}};onmessage=function(t){var e=t.data,r={channels:e.channels};!function(t,e){v.start(t.filename+" [2.1] Calculate loudest part");for(var r,a,n=Math.min,o=Math.abs,i=.95*t.peak,s=.02*t.sampleRate,u=0,f=0;f<e.channels.length;++f){for(var h=e.channels[f].graph,l=0,c=0,p=0,m=-1,g=0,b=n(s,h.length)-1;m<b;)o(h[++m])>i&&++g;for(l=p,c=g,b=h.length-1;m<b;)o(h[p++])>i&&--g,o(h[++m])>i&&++g,g>c&&(c=g,l=p);c>u&&(u=c,a=l,r=f)}e.channels[r].loudestPart={count:u,index:a+s/2},v.stop(t.filename+" [2.1] Calculate loudest part")}(e,r),function(t,e){v.start(t.filename+" [2.2] Calculate avg spectrum");var r=Math.sqrt,a=Math.min,o=n.toDb,i=m.FFT.calculatePow2Size(t.sampleRate),s=m.windowFunctions.Blackman(t.sampleRate).getData(),u=new m.FFT(i,t.sampleRate),f=new Float32Array(i),h=i/2;e.channels.forEach((function(e){for(var n=e.graph,l=e.rms,c=new Float32Array(h),p=n.length,m=0;m<p;){for(var g=a(m+t.sampleRate,p),v=0;m<g;++m,++v)f[v]=n[m]*s[v];for(;v<i;++v)f[v]=0;u.fft(f);for(var b=u.getReal(),M=u.getImaginary(),d=0;d<h;++d)c[d]+=b[d]*b[d]+M[d]*M[d]}for(var w=t.sampleRate*p,F=0;F<h;++F)c[F]=o(r(c[F]/w)/l);e.avgSpectrum=c})),v.stop(t.filename+" [2.2] Calculate avg spectrum")}(e,r),function(t,e){v.start(t.filename+" [2.3] Calculate allpass");var r=Math.max,a=Math.sqrt,n=Math.abs,o=Math.pow,i=[20,60,200,600,2e3,6e3,2e4];e.channels.forEach((function(e){var s=e.graph,u=[];i.forEach((function(e){for(var i=new m.allpass(e,t.sampleRate),f=0,h=0,l=0;l<s.length;++l){var c=i.processSample(s[l]);f=r(f,n(c)),h+=o(c,2)}var p=a(h/t.numSamples);u.push(f/p)})),e.allpass=u})),e.allpass={freqs:i},v.stop(t.filename+" [2.3] Calculate allpass")}(e,r),function(t){v.start(t.filename+" [2.4] Calculate histogram");var e=Math.pow,r=Math.round,a=Math.log2,n=e(2,t.bitDepth-1)-1,o=e(2,16),i=o/2-1,s=44100/t.sampleRate;t.channels.forEach((function(t){for(var e=t.graph,u=new Float32Array(o),f={},h=0,l=0;l<e.length;++l){var c=r((e[l]+1)*n);f[c]||(f[c]=!0,++h),u[r((e[l]+1)*i)]+=s}t.histogram={graph:u,bits:a(h)}})),v.stop(t.filename+" [2.4] Calculate histogram")}(e),function(t,e){v.start(t.filename+" [2.5] Calculate peak vs RMS");var r=Math.min,a=Math.ceil,o=Math.max,i=Math.abs,s=Math.sqrt,u=Math.pow,f=n.toDb,h=Math.pow(2,t.bitDepth-1)-1,l=-Math.pow(2,t.bitDepth-1),c=0;e.channels.forEach((function(e){for(var n=e.graph,p=a(t.numSamples/t.sampleRate),m=new Float32Array(p),g=new Float32Array(p),v=new Float32Array(p),b=n.length,M=0,d=0;d<b;++M){for(var w=r(t.sampleRate,b-d),F=d+w,_=0,y=0;d<F;++d)_=o(_,i(n[d])),y+=u(n[d],2),c+=u(a(n[d]*(n[d]<0?l:h)),2);var S=s(y/w);m[M]=f(_),g[M]=f(S),v[M]=f(_/S)}e.peakVsRms={peak:m,rms:g,crest:v}})),e.checksum=c,v.stop(t.filename+" [2.5] Calculate peak vs RMS")}(e,r);var a=[];r.channels.forEach((function(t){a.push(t.graph.buffer),a.push(t.avgSpectrum.buffer),a.push(t.histogram.graph.buffer),a.push(t.peakVsRms.peak.buffer),a.push(t.peakVsRms.rms.buffer),a.push(t.peakVsRms.crest.buffer)})),postMessage(r,a)}}]);